<!-- extends表明此页面继承自 base.html 文件 -->
{% extends "base.html" %}
{% load static %}
<!-- 写入 base.html 中定义的 title -->
{% block title %}
    课程筛选
{% endblock title %}

{% block content %}
    <div class="container">
        <form action="{% url "index" %}" method="get">

            <div class="row mt-3">
                <ul class="select">
                    <li class="select-list">
                        <label id="select1">
                            <label for="id_grade">年级：</label>
                            <button type="button" class="select-all selected"><input type="hidden" value="9"
                                                                                     name="grade">全部
                            </button>
                            <button type="button"><input type="hidden" value="0">小学一年级至三年级</button>
                            <button type="button"><input type="hidden" value="1">小学四年级至六年级</button>
                            <button type="button"><input type="hidden" value="2">初一</button>
                            <button type="button"><input type="hidden" value="3">初二</button>
                            <button type="button"><input type="hidden" value="4">初三</button>
                            <button type="button"><input type="hidden" value="5">高一</button>
                            <button type="button"><input type="hidden" value="6">高二</button>
                            <button type="button"><input type="hidden" value="7">高三</button>
                            <button type="button"><input type="hidden" value="8">其他</button>
                        </label>
                    </li>
                    <li class="select-list">
                        <label id="select2">
                            <label for="id_subject">科目：</label>
                            <button type="button" class="select-all selected"><input type="hidden" value="0"
                                                                                     name="subject">全部
                            </button>
                            <button type="button"><input type="hidden" value="zh">语文</button>
                            <button type="button"><input type="hidden" value="math">数学</button>
                            <button type="button"><input type="hidden" value="en">英语</button>
                            <button type="button"><input type="hidden" value="phy">物理</button>
                            <button type="button"><input type="hidden" value="che">化学</button>
                            <button type="button"><input type="hidden" value="bio">生物</button>
                            <button type="button"><input type="hidden" value="pol">政治</button>
                            <button type="button"><input type="hidden" value="his">历史</button>
                            <button type="button"><input type="hidden" value="geo">地理</button>
                        </label>
                    </li>
                    <li class="select-list">
                        <label id="select3">
                            <label for="id_charge">时薪：</label>
                            <button type="button" class="select-all selected"><input type="hidden" value="0"
                                                                                     name="charge">全部
                            </button>
                            <button type="button"><input type="hidden" value="1">30元以下</button>
                            <button type="button"><input type="hidden" value="2">30~50元</button>
                            <button type="button"><input type="hidden" value="3">50~70元</button>
                            <button type="button"><input type="hidden" value="4">70~100元</button>
                            <button type="button"><input type="hidden" value="5">100元以上</button>
                        </label>
                    </li>
                    <li class="select-list">
                        <label id="select4">
                            <label for="id_gender">性别：</label>
                            <button type="button" class="select-all selected"><input type="hidden" value="0"
                                                                                     name="gender">全部
                            </button>
                            <button type="button"><input type="hidden" value="M">男</button>
                            <button type="button"><input type="hidden" value="M">女</button>
                        </label>
                    </li>
                    <li class="select-result">
                        <dl>
                            <dt class="pb-2">已选条件：</dt>
                            <dd class="select-no">暂时没有选择过滤条件</dd>
                        </dl>
                    </li>
                </ul>
            </div>
            <div class="row-mt-0">
                <button type="submit" class="btn btn-primary">筛选</button>
            </div>
        </form>
    </div>
    <br>
    <!--课程信息的卡片容器 -->
    {% for  cours in course %}

        <div class="container">
            <div class="row mt-2">
                <div class="col-4 mb-4">
                    <!-- 卡片容器 -->
                    <div class="card h-100">
                        <!-- 标题 -->
                        <h4 class="card-header">{{ cours.nick_name }}
                            <span class="text-muted"
                                  style="font-size:0.5em">{{ cours.get_grade_course_display }}—{{ cours.get_subject_display }}</span>
                        </h4>
                        <!-- 摘要 -->
                        <div class="card-body">
                            <p class="card-text">{{ cours.introduction }}.</p>
                        </div>
                        <!-- 注脚 -->
                        <div class="card-footer">
                            <span class="pt-2" style="float:right">{{ cours.teacher }}</span>
                            <a href="{% url "Course:detail_course" cours.id %}" class="btn btn-primary">了解课程</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    {% endfor %}
    <!-- jQuery部分，呈现选择效果 -->
    <script>
        $(document).ready(function () {
            $("#select1 button").click(function () {
                $(this).addClass("selected").siblings().removeClass("selected");
                $(this).children("input").attr("name", "grade");
                $(this).siblings().children("input").removeAttr("name");
                if ($(this).hasClass("select-all")) {
                    $("#selectA").remove();
                } else {
                    var copyThisA = $(this).clone();
                    if ($("#selectA").length > 0) {
                        $("#selectA input").html($(this).text());
                    } else {
                        $(".select-result dl").append(copyThisA.attr("id", "selectA"));
                    }
                }
            });

            $("#select2 button").click(function () {
                $(this).addClass("selected").siblings().removeClass("selected");
                $(this).children("input").attr("name", "subject");
                $(this).siblings().children("input").removeAttr("name");
                if ($(this).hasClass("select-all")) {
                    $("#selectB").remove();
                } else {
                    var copyThisB = $(this).clone();
                    if ($("#selectB").length > 0) {
                        $("#selectB input").html($(this).text());
                    } else {
                        $(".select-result dl").append(copyThisB.attr("id", "selectB"));
                    }
                }
            });

            $("#select3 button").click(function () {
                $(this).addClass("selected").siblings().removeClass("selected");
                $(this).children("input").attr("name", "charge");
                $(this).siblings().children("input").removeAttr("name");
                if ($(this).hasClass("select-all")) {
                    $("#selectC").remove();
                } else {
                    var copyThisC = $(this).clone();
                    if ($("#selectC").length > 0) {
                        $("#selectC input").html($(this).text());
                    } else {
                        $(".select-result dl").append(copyThisC.attr("id", "selectC"));
                    }
                }
            });

            $("#select4 button").click(function () {
                $(this).addClass("selected").siblings().removeClass("selected");
                $(this).children("input").attr("name", "gender");
                $(this).siblings().children("input").removeAttr("name");
                if ($(this).hasClass("select-all")) {
                    $("#selectD").remove();
                } else {
                    var copyThisD = $(this).clone();
                    if ($("#selectD").length > 0) {
                        $("#selectD input").html($(this).text());
                    } else {
                        $(".select-result dl").append(copyThisD.attr("id", "selectD"));
                    }
                }
            });

            $("#selectA").on("click", function () {
                $(this).remove();
                $("#select1 .select-all").addClass("selected").siblings().removeClass("selected");
            });

            $("#selectB").on("click", function () {
                $(this).remove();
                $("#select2 .select-all").addClass("selected").siblings().removeClass("selected");
            });

            $("#selectC").on("click", function () {
                $(this).remove();
                $("#select3 .select-all").addClass("selected").siblings().removeClass("selected");
            });

            $("#selectD").on("click", function () {
                $(this).remove();
                $("#select4 .select-all").addClass("selected").siblings().removeClass("selected");
            });

            $(".select button").on("click", function () {
                if ($(".select-result button").length >= 1) {
                    $(".select-no").hide();
                } else {
                    $(".select-no").show();
                }
            });

        });
    </script>
{% endblock content %}