### 四月份开发计划回顾

#### 概述

在四月份，小组基本完成当初定下的功能要求：用户系统（包括注册、登录、登出、修改个人信息、个人信息展示），但是也有一些工作仍需完善，包括但不限于导航栏下拉菜单完善、错误信息处理、弹窗功能增加。四月份的开发工作按照功能进行分工：注册（仝志欣、刘虎）；登录、登出（陈天睿、李欣然）；个人信息展示和修改（李皓宇、饶茜霖、张紫韵）。所以，具体编写过程经验由各个分组给出。

#### 注册功能

**要求**：学院用户和教员用户都可以进行正常注册，并优化注册界面。

- **仝志欣**
  - 我负责的是注册的表单和基础view函数的实现。表单主要是为了方便在前端进行渲染和后端的自带验证，否则还要自己编写验证，用django自带的验证就可以直接验证比如email等字段的合理性。view里面的函数，对前端返回的post进行验证、生成用户模型并储存在数据库中。
  - 经验：第一开始进行编写的时候不要过于追求完美，而是要考虑开发的难度，比如在模型这里就可以先将一些字段设为拥有默认值，还有邮箱什么的可以先不用独一无二性要求等等，这样方便于开发和测试；开发一个基本功能后，记得及时发布到GitHub上面的仓库或者提交到本地的仓库；有问题要及时在群里面进行交流，否则可能会影响开发的进度；

- **刘虎**
  - 转眼间一个月已经过去，我们小组的家教系统的开发第一轮迭代已经结束。与初始的任务分工不同，我主要负责了整个平台结构的搭建和部分功能的优化和细化。模仿制作，结构学习是这个阶段的主调，我在这个阶段只是机械的模仿别人做的结果，然后稍稍改动字段和逻辑，用于我们的工程。这是编程学习的开始阶段和必要阶段，我逐渐明白这个模仿不需要了解为什么，做着做着就理解为啥要这么做了。我按照我们小组讨论的结果搭建了django项目的整体结构，后来在开发中，我搭建的这个结构漏洞百出，模型中，我在邮箱和电话号码添加了唯一性校验，后来发现这个校验在开发阶段非常影响测试，就取消了。我建议数据库文件应当上传到git，这样大家共用一个数据库，比较方便，后来发现数据库文件频繁的改动以及无法逐行改动追踪的特点难以被git正确跟踪，应当被ignore掉。我开始预设的一些html页面后来没有用到，例如logout.html。当然也有好的，在建立模型时，年级和学科这两个字段会被做成选项，我采用了内部存储数字1，2，3……来代替各年级的方式，为后来的一些函数的编写带来了便利。
  - 就我们小组合作而言，我认为每周两次的组会非常的及时和有效，在我们项目的进程中起了很大作用。但是平时QQ群的交流并不够活跃，但是处于一个可以接受的程度。

#### 登录登出功能

**要求**：学员用户和教员用户可以用同一个页面进行登录操作、记录session；可以注销；

- **陈天睿**

  - 四月的第一轮迭代中我们完成了家教平台的用户登录、登出和注册功能，以及学生和老师的信息更新。考虑到四月迭代开始时间较晚，而且大家也是刚开始上手写自己的网站，任务安排并不多，但是功能非常基础，涉及到了一般django开发的全环节。经过这一轮迭代，我对于django框架有了更清晰的认识。
  - 在我们的开发过程中，有几点我认为对我们的开发有很大的帮助：
    1.  在讨论完要开发的功能之后，我们着重讨论了model、view函数、表单等的命名，大家也对于各部分有了统一的认识，对于网站的各个部分都能够考虑到。然后由刘虎同学将model、函数等按照讨论的结果统一定义好，上传到git，方便大家进行开发。经过一轮之后，有了经验，五月的开发中我们就没有统一定义函数等的名称了，而是让每个人开发的时候来按标准定义。
    2.  我负责了登录功能的实现，由于我们的用户类型有学生和老师两种，个人信息有所不同，所以需要进行身份识别。不过Django内只有User一种用户模型，将Teacher和Student分别和User进行一对一联系能够保证老师和学生用户名不可重复，但是在判别身份时较麻烦，还需要根据用户名在学生和老师两个模型中查找，一开始为了解决这个问题，使用了filter函数在数据库中过滤，逻辑复杂、效率低。尤其在完善个人信息功能开发中遇到问题。对此，我们在群内讨论，大家共同查找资料，实现了User模型的自定义拓展，从而顺利实现了两种身份用户的识别，完善了模型。

  - 在开发过程中我们组内保持交流，随时有问题随时抛出，充分集思广益，使得解决问题的效率较高，我也在这个过程中有针对性地学到了很多有用的知识。

- **李欣然**

  - 四月份的软件开发结束，我们已经实现了家教网站的基础功能。
  
  - 在开发计划中，我和几个同学一起负责家教平台的登陆注册部分，小组其他成员进展很快，我的代码基本都是网上教程加GitHub小组的库中copy下来的。组内大家都做到很好的资源共享，让我少走了很多弯路，比如安装bootstrap,载入静态文件等等。每周都进行的小组讨论让我可以了解大家在开发过程中遇到的问题，虽然我知道的太少帮不上什么忙，但是也可以从讨论中学习到很多，更好的理解并使用数据库的某些操作。
  - 现在实现的部分已经有教员和学生两个表单，进一步开发需要完善课程信息，也是我下一步要学习的部分。

#### 个人信息展示和修改

**要求**：分别正常显示学生和老师的个人信息页面，并且通过表单支持用户对基本信息的修改。

- **李皓宇**
- 在四月份的第一轮迭代开发中，我们小组围绕家教网站这一主题进行了用户注册登录以及用户个人信息修改这两个功能的开发。组内又分了两组队员分别负责这两个功能的开发，我、饶茜林、张紫韵做的是后者，我进行后端表单以及视图函数的编写，另外两位女同学则写了前端的html页面。
  - 通过详细阅读教程，表单类直接继承了models.py中的类，省了许多事。开发过程中另外一个问题就是出现了No Reverse Match的错误，充分利用搜索引擎查找无果后，我决定回归源代码本身，最后发现是因为其他同学写的login函数中，redirect到个人信息页面时，少传递了id参数。这让我明白了在小组开发的过程中，**不同人员开发的不同功能间在进行交互时，接口部分是我们检查的重点**。最后，我认为我们小组Git的使用带来了很多便利，每开发完一部分后，先pull更新本地，在push到远程仓库，就是如果commit的信息填写能更规范就更好了·。
- 四月份内容整体比较简单，更是一个适应的过程，五月份要加油冲刺了，在不断学习的过程中完成新的功能。
- **饶茜霖**

  - 在四月份的开发过程中我主要负责修改用户信息页面前端编写（student_profile_update.html和teacher_profile_update.html）。通过本月的学习与开发，我注意到前端页面的编写需要建立在对后端充分的了解上，只有与后端开发同学进行有效的沟通、不断调试修改，才能在接口和参数传递上没有失误。

  - 除了读懂view和forms中的函数，要注意models中模型字段的设置，这样在前端页面调用模型中参数时才能不容易出现格式错误。在编写时参考教程与小组项目的models对于选项类型的字段（gender、grade）设置不同，导致在html中直接导入forms中标签会失败，需要手动按行编写并添加选项。
- **张紫韵**

  - 在四月份的开发过程中，我和饶茜霖同学一起负责编辑个人信息的前端html编写，但是在使用html标签和css标签写完后，我才发现自己犯了一个巨大的错误。我完全把前端和后端隔离开，只写出了一个空有的前端架子，无法与后端链接，且没有使用小组放在app文件夹中的bootstrap模板，即没有用base继承的相关语句写html。因此最终是在另一位同学写的html上和大家一起拓展和改进。

  - 这次尝试告诉我，要把前端和后端紧密联系才能保证网页的成功运行，并且对后端的视图函数和模板要有一定的了解。

  - 最后，接下来除了继续学习html和css，还有script也要加以学习，为接下来的五月份开发做准备。



### 五月份开发计划

##### 优先顺序

1. 模型建设、django 的url 设计
2. 建立关于首页（index）的视图函数和渲染页面；我的课程（包含教员和学员）管理函数和相应的渲染页面；每一个课程信息的详细展示（包含 学生和教员的匹配工作）；
3. 关于课程的评论系统建设；
4. 整个家教平台在服务器上的移植；

##### 实现要求

- 模型建设：要能够存储 课程信息、教员、学员以及课程详细信息字段；
- 首页（index）：游客只能看到欢迎界面，只有学员或者教员登录才能看到搜索界面；搜索界面选择后点击搜索要能够显示匹配后的结果，并渲染出来；
- 课程信息的详细展示：包含课程昵称、教师名字等信息；点击申请的按钮；
- 我的课程
  - 教员：能够发布想要教的课程（发布同一年级科目且未匹配状态有数量限制），并配置课程信息；能看到学员的发出的申请，点击同意之后两者能够建立匹配的关系；能够看到未匹配的和已匹配的课程；能够看到已匹配的学生名字（或者其他信息）；
  - 学员：能够看到已经匹配的课程信息（包含教师信息（比如名字（可以加上链接））；如果有评论系统，需要加上评论框（且评论内容可出现在课程详细信息显示里面）；
- 评论系统：能够在教师发布的同一年级同一科目（或者其他限定）课程详细信息下展示；学生可以在“我的课程”里面对配对老师进行评论；

##### 具体实现步骤

- 模型建设：建立新的课程app，在新的app中建立新的模型“课程”，大致包含：课程名字字段、年级字段、科目字段、教员、学员、课程状态字段、课程介绍字段；
- URL：/inidex指向首页；/课程app/match指向学生申请匹配函数；/课程app/detail/id指向详细信息显示页面；/课程app/我的课程_detail/id指向 我的课程学生和教员的课程管理界面；/课程app/申请 指向学生申请的函数；/课程app/同意 指向同意；/课程app/增加 指向发布课程函数；
- 首页（index）：两种解决方案
  - 一个视图函数，两个html页面；视图函数：判断是否为游客，是则返回游客界面；否则开始判断是否为POST操作，是则进行筛选，选出比较匹配的所有课程（或者有限课程），整理，渲染到html页面；否则选出根据学生年龄或者其它信息产生的推荐课程，渲染到html。这里渲染那一部分推荐的课程信息时，格式可以相同以节省脑力；
  - 两个视图函数，两个html页面；一个视图函数用来判断是否为游客，是则返回游客界面；否则返回选出根据学生年龄或者其它信息产生的推荐课程，渲染到html；另一个视图函数单纯用来搜索，点击post（搜索）之后，进行该视图函数，并且在视图函数里面应该不需要判断，进行筛选，选出比较匹配的所有课程（或者有限课程），整理，重定向渲染到index.html页面；
- 课程信息详细展示：两个视图函数，一个html页面；一个视图函数用来返回课程信息，并渲染详细页面；另一个用来提交申请；提交申请之后，在申请的视图函数里面要有对数据库的操作，然后改变“申请”->“已申请”，返回并渲染。
- 我的课程管理界面：三个视图函数，两个html页面；视图函数要有对用户身份的判断返回不同的页面，发布课程，同意申请。对于教员，要有对学员申请的同意，发布课程，已教课程等等的展示，然后返回信息并渲染；对于学员也一样；发布的课程可以对年级和科目做要求；
- 评论系统：这个视图函数其实可以跟发布课程里面的函数搁在一起做成按钮，主要是往后端返回评论字段，保存进数据库；在详细信息课程页面可以在后端进行筛选得到数据库中“老师名称”“年级科目”相符的所有评论并实名显示；

##### 分工

首页及相关：陈天睿、李皓宇、张紫韵、饶茜霖；

我的课程和课程详细信息展示：仝志欣、刘虎、李欣然；

##### 任务估算

5月5~5月24号，每周三周五集中问题处理和进度管理；预计于5月24号基本完成上述开发任务，之后时间进行调试和部署；

##### 版本

sprint2和sprint2_dev(开发完成之后的测试工作)；



##### 总负责人：陈天睿

